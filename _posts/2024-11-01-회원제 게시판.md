---
title: 🧑‍💻 개인 프로젝트 - 회원제 게시판 만들기(JAVA)
date: 2024-11-01 10:00:00 +0900
categories: [프로젝트, 개인 프로젝트]
tags:
  [
    JAVA,
    게시판
    .
    .
    .
  ]
description: "JWT 토큰 기반 회원제 게시판 Maven Project 입니다."
---

---

## <span class="centered-title">**JAVA 회원제 게시판 구현**</span>

<div class="github-links-container2">
  <div class="github-link-box" onclick="window.open('https://github.com/yoonbin106/PersonalProject2.git', '_blank')">
    <img src="/assets/img/favicons/깃허브.png" alt="깃허브 링크" class="github-icon">
    <span class="github-text">Project code<span style="color:black"> - BackEnd</span></span>
  </div>
</div>

---

### <span class="larger-text" style="display: block; margin-bottom:-10px;">1. **프로젝트 소개**</span>

ㅤ이 프로젝트는 JAVA로 구현된 회원제 게시판 사이트입니다.

ㅤ사용자는 회원가입을 통해 게시글 등록, 수정, 삭제, 조회를 할 수 있습니다.
ㅤ
<div class="underline-container5">
    <span class="personal2">개발환경</span>
    <span style="margin-left:10px">Eclipse / JDK 17</span>
</div>

<div class="underline-container5">
    <span class="personal2">서버</span>
    <span style="margin-left:10px">Apache Tomcat/10.1.31</span>
</div>

<div class="underline-container5">
    <span class="personal2">데이터 베이스</span>
    <span style="margin-left:10px">Oracle Database 18c Express Edition</span>
</div>

---

### <span class="larger-text" style="display: block; margin-bottom:-10px;">2. **프로젝트 구조**</span>
> 상세 구조는 페이지 상단의 깃허브 링크를 참고해주세요
{: .prompt-info }

<pre class = "structure" style="margin-left:25px; margin-bottom:30px;">
📁src
&nbsp;&nbsp;└──📁main
    &nbsp;&nbsp;&nbsp;&nbsp;└──📁java
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁controller - 📄게시판 CRUD, 로그인, 회원가입용 컨트롤러
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁filter -📄토큰 기반 사용자 인증 처리 필터
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁listener -📄웹 애플리케이션 시작, 종료 이벤트 처리 리스너
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁model - 📄페이징 처리 및 UI 생성 유틸리티 클래스
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁resources
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁service
    &nbsp;&nbsp;&nbsp;&nbsp;└──📁webapp
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁bbspage - 📄게시판 페이지 CRUD 관련 로직 
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁connectionpool
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁META_INF
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁page - 📄회원가입 , 로그인 , 홈 페이지 관련 로직
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁template 
          &nbsp;&nbsp;&nbsp;&nbsp;└──📁WEB-INF
</pre>

---

### <span class="larger-text" style="display: block; margin-bottom:-10px;">3. **주요 코드**</span>

> 상세 코드는 페이지 상단의 깃허브 링크를 참고해주세요
{: .prompt-info }

<div class="little-one">
<span class="little-title">(1) 로그인</span>
</div>
<details>
  <summary class="custom-summary2">LoginController.java</summary>
  <div class="info-box">
    <p>아래 코드는 로그인 기능을 처리하는 서블릿으로, 사용자가 입력한 아이디와 비밀번호를 검증하고 인증된 사용자의 세션을 생성합니다.</p>
    <p>성공적인 로그인 시 토큰을 발급하여 쿠키와 세션에 저장하고, 로그인 성공 후 지정된 페이지로 리다이렉션합니다.</p>
    <p>실패 시 에러 메시지를 로그인 페이지에 전달합니다.</p>
  </div>

  <div class="toggle-content">
    <pre class="code-box">
      <button class="copy-button">Copy</button>
      <button class="close-button">Close</button>
      <code class="language-java">
  @WebServlet("/LoginController")
  public class LoginController extends HttpServlet {
      private static final long serialVersionUID = 1L;

      // POST 요청 처리
      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          request.setCharacterEncoding("UTF-8");  // 한글 인코딩 설정

          String username = request.getParameter("username");  // 입력받은 아이디
          String password = request.getParameter("password");  // 입력받은 비밀번호

          // 간단한 유효성 검사 (아이디와 비밀번호가 비어있지 않은지 확인)
          if (username == null || username.trim().isEmpty() || password == null || password.isEmpty()) {
              handleError(request, response, "아이디와 비밀번호를 모두 입력하세요");
              return;
          }

          UserDAO userDAO = new UserDAO();  // 사용자 검증을 위한 UserDAO 객체 생성

          // 아이디와 비밀번호 검증
          if (userDAO.validateUser(username, password)) {
              // 인증 성공 시 토큰 발급
              String token = userDAO.issueToken(username);  // 사용자에게 발급할 토큰 생성
              Cookie tokenCookie = new Cookie("token", token);  // 토큰을 쿠키로 생성
              tokenCookie.setMaxAge(60 * 60 * 24 * 7); // 쿠키 유효기간 설정 (7일)
              response.addCookie(tokenCookie);  // 쿠키를 응답에 추가

            // HttpSession을 이용하여 사용자 정보 저장
            HttpSession session = request.getSession();  // 세션 생성
            request.getSession().setAttribute("token", token);  // 세션에 토큰 저장
            session.setAttribute("token", token);  // 세션에 토큰 저장
            session.setAttribute("username", username);  // 세션에 사용자 이름 저장

            // 로그인 성공 후 페이지 리다이렉트
            response.sendRedirect(request.getContextPath() + "/page/LoginOk.jsp");
        } else {
            // 인증 실패 시 에러 메시지 출력
            handleError(request, response, "아이디 또는 비밀번호가 잘못되었습니다");
        }
    }

    // 에러 메시지를 로그인 페이지에 전달하는 메소드
    private void handleError(HttpServletRequest request, HttpServletResponse response, String message) throws ServletException, IOException {
        request.setAttribute("errorMessage", message);  // 에러 메시지 설정
        request.getRequestDispatcher("/page/Login.jsp").forward(request, response);  // 로그인 페이지로 포워드
    }
}
      </code>
    </pre>
  </div>
</details>


<details>
  <summary class="custom-summary2">LogoutController.java</summary>
  <div class="info-box">
    <p>아래 코드는 로그아웃 기능을 처리하는 서블릿으로, 사용자가 로그아웃을 요청하면 세션과 쿠키를 초기화하고, 로그인 페이지로 리다이렉트합니다.</p>
    <p>POST 요청에서 세션을 무효화하고, "token"이라는 이름의 쿠키를 삭제한 후 로그인 페이지로 이동합니다.</p>
  </div>

  <div class="toggle-content">
    <pre class="code-box">
      <button class="copy-button">Copy</button>
      <button class="close-button">Close</button>
      <code class="language-java">
  @WebServlet("/LogoutController")
  public class LogoutController extends HttpServlet {
      private static final long serialVersionUID = 1L;

      // POST 요청 처리
      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          // 세션 무효화
          request.getSession().invalidate();  // 세션 초기화

          // "token" 쿠키 삭제
          Cookie[] cookies = request.getCookies();  // 요청에서 모든 쿠키를 가져옴
          if (cookies != null) {
              for (Cookie cookie : cookies) {
                  if (cookie.getName().equals("token")) {  // "token" 쿠키 찾기
                      cookie.setMaxAge(0);  // 쿠키 유효기간을 0으로 설정하여 삭제
                      response.addCookie(cookie);  // 삭제된 쿠키를 응답에 추가
                      break;  // 더 이상 반복할 필요 없음
                  }
              }
          }

          // 로그아웃 후 로그인 페이지로 리다이렉트
          response.sendRedirect(request.getContextPath() + "/page/Login.jsp");  // 로그인 페이지로 이동
      }

      // GET 요청을 POST 요청으로 처리
      protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          doPost(request, response);  // GET 요청은 POST 요청으로 처리
      }
  }
      </code>
    </pre>
  </div>
</details>

<details>
<summary class="custom-summary2">Login.jsp</summary>
 <div class="info-box">
    <p>아래 코드는 로그인 화면을 구성하는 JSP 로, 사용자가 아이디와 비밀번호를 입력할 수 있도록 폼을 제공합니다.</p>
    <p>폼 제출 시, 로그인 정보를 `LoginController`로 전송하며, 로그인 실패 시 에러 메시지를 표시합니다.</p>
  </div>
<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-javascript">
  &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;
  &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;

  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
      &lt;jsp:include page=&quot;/template/Config.jsp&quot; /&gt;
      &lt;title&gt;Login&lt;/title&gt; // 페이지 제목 설정
      &lt;script&gt;
          // 페이지 로딩 후, 에러 메시지가 있을 경우 경고창으로 표시
          document.addEventListener(&#39;DOMContentLoaded&#39;, function() {
              var errorMsg = &#39;&lt;%= request.getAttribute(&quot;errorMsg&quot;) %&gt;&#39;; // request 객체에서 에러 메시지 가져오기
              if (errorMsg &amp;&amp; errorMsg !== &#39;null&#39;) {
                  alert(errorMsg);  // 에러 메시지 존재 시 경고창으로 표시
              }
          });
      &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;container-fluid&quot;&gt;
            &lt;jsp:include page=&quot;/template/Header.jsp&quot; /&gt;
            &lt;div class=&quot;p-5 bg-success text-white&quot;&gt;
                &lt;h1 style=&quot;font-weight: bold;&quot;&gt;로그인&lt;/h1&gt;
            &lt;/div&gt;
            &lt;fieldset class=&quot;border rounded-3 p-3 text-center mt-3 mb-3&quot;&gt;
                &lt;legend class=&quot;float-none w-auto px-3&quot; style=&quot;font-weight: bold;&quot;&gt;로그인 정보를 입력하세요&lt;/legend&gt; // 로그인 폼 제목
                &lt;form class=&quot;needs-validation&quot; action=&quot;${pageContext.request.contextPath}/LoginController&quot; method=&quot;post&quot;&gt;
                    &lt;div class=&quot;row justify-content-center&quot;&gt;
                        &lt;div class=&quot;col-md-8&quot;&gt;
                            &lt;div class=&quot;row mb-3&quot;&gt;
                                &lt;div class=&quot;col-md-4 mb-2 mt-5 d-flex align-items-center justify-content-md-end&quot;&gt;
                                    &lt;label for=&quot;username&quot; class=&quot;form-label&quot; style=&quot;font-weight: bold;&quot;&gt;아이디&lt;/label&gt; // 아이디 입력 필드 라벨
                                &lt;/div&gt;
                                &lt;div class=&quot;col-md-6 mb-3 mt-5&quot;&gt;
                                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;username&quot; placeholder=&quot;아이디 입력&quot; name=&quot;username&quot; value=&quot;${param.username}&quot;&gt; // 아이디 입력 필드
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;row mb-3&quot;&gt;
                                &lt;div class=&quot;col-md-4 mb-2 mt-3 d-flex align-items-center justify-content-md-end&quot;&gt;
                                    &lt;label for=&quot;password&quot; class=&quot;form-label&quot; style=&quot;font-weight: bold;&quot;&gt;비밀번호&lt;/label&gt; // 비밀번호 입력 필드 라벨
                                &lt;/div&gt;
                                &lt;div class=&quot;col-md-6 mb-3 mt-3&quot;&gt;
                                    &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; placeholder=&quot;비밀번호 입력&quot; name=&quot;password&quot;&gt; // 비밀번호 입력 필드
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;row mb-3&quot;&gt;
                                &lt;div class=&quot;col-md-12&quot;&gt;
                                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-dark&quot;&gt;로그인&lt;/button&gt; // 로그인 버튼
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;c:if test=&quot;${not empty errorMessage}&quot;&gt;
                                &lt;div class=&quot;row mb-3&quot;&gt;
                                    &lt;div class=&quot;col-md-12 d-flex justify-content-center&quot;&gt;
                                        &lt;div class=&quot;alert alert-danger&quot; style=&quot;max-width: 50%; padding: 20px;&quot;&gt;
                                            ${errorMessage}  // 로그인 실패 시, 오류 메시지를 표시
                                        &lt;/div&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/c:if&gt;

                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/form&gt;
            &lt;/fieldset&gt;
            &lt;jsp:include page=&quot;/template/Footer.jsp&quot; /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
  &lt;/html&gt;
      </code>
</pre>
</div>
</details>

<details>
<summary class="custom-summary2">LoginOk.jsp</summary>
<div class="info-box">
    <p>아래 코드는 로그인 성공 후 사용자에게 환영 메시지를 표시하는 JSP 입니다.</p>
    <p>로그인 성공 시, 세션에서 사용자의 토큰을 로컬 스토리지에 저장하며, 사용자에게 환영 메시지를 보여줍니다.</p>
</div>
<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class = "language-javascript">
  &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt; // 페이지의 인코딩 및 언어 설정
  &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt; // JSTL 코어 태그 라이브러리 포함

  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
      &lt;jsp:include page=&quot;/template/Config.jsp&quot;/&gt;
      &lt;title&gt;LoginOk.jsp&lt;/title&gt;
      &lt;script&gt;
          // 클라이언트 측 JavaScript 코드 작성
          var token = &#39;${sessionScope.token}&#39;; // 세션에서 토큰 값을 가져옴
          localStorage.setItem(&#39;token&#39;, token); // 로컬 스토리지에 토큰 저장
      &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;div class=&quot;container&quot;&gt;
          &lt;div class=&quot;container-fluid&quot;&gt;
              &lt;jsp:include page=&quot;/template/Header.jsp&quot;/&gt;
              
              &lt;!-- 컨텐츠 시작 --&gt;
              &lt;div class=&quot;p-5 bg-success text-white&quot;&gt;
                  &lt;h1 style=&quot;font-weight:bold;&quot;&gt;로그인 성공&lt;/h1&gt; // 로그인 성공 메시지 표시
              &lt;/div&gt;
              
              &lt;fieldset class=&quot;border rounded-3 p-3 text-center mt-3 mb-3&quot;&gt;
                  &lt;h3 class=&quot;display-6&quot; style=&quot;font-weight:bold;&quot;&gt;${sessionScope.username}님 환영합니다!&lt;/h3&gt; // 로그인한 사용자의 이름을 출력
                  
                  &lt;div class=&quot;row mt-4&quot;&gt;
                      &lt;div class=&quot;col-md-12&quot;&gt;
                          &lt;h5&gt;상단 메뉴를 통해 이동해주세요&lt;/h5&gt;
                      &lt;/div&gt;
                  &lt;/div&gt;
              &lt;/fieldset&gt;        
              &lt;!-- 컨텐츠 끝 --&gt;
              
              &lt;jsp:include page=&quot;/template/Footer.jsp&quot;/&gt;      
          &lt;/div&gt;&lt;!-- container-fluid --&gt;
      &lt;/div&gt;&lt;!-- container --&gt;
      
      &lt;script&gt;
          document.getElementById(&#39;boardBtn&#39;).addEventListener(&#39;click&#39;, function() {
              window.location.href = &#39;${pageContext.request.contextPath}/BoardController&#39;;  // 게시판 페이지로 이동
          });
      &lt;/script&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code>
</pre>
</div>
</details>

<div class="little">
<span class="little-title">(2) 회원가입</span>
</div>

<details>
<summary class="custom-summary2">SignUpController.java</summary>
<div class="toggle-content">
  <div class="info-box">
    <p>아래 코드는 회원가입을 처리하는 서블릿입니다.</p>
    <p>사용자가 회원가입 폼을 제출하면 이 서블릿이 호출되어 유효성 검사와 중복 검사 후, 사용자의 데이터를 저장합니다.</p>
  </div>

<pre class="code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-java">
  @WebServlet("/SignUpController") // 이 서블릿은 "/SignUpController" URL에 매핑
  public class SignUpController extends HttpServlet {
      private static final long serialVersionUID = 1L; // 직렬화 ID 설정

      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          request.setCharacterEncoding("UTF-8"); // 요청의 문자 인코딩을 UTF-8로 설정

          // 요청 파라미터를 받아옴
          String username = request.getParameter("username"); // 사용자 아이디
          String password = request.getParameter("password"); // 사용자 비밀번호
          String passwordConfirm = request.getParameter("passwordConfirm"); // 비밀번호 확인
          String gender = request.getParameter("gender"); // 성별
          String[] interests = request.getParameterValues("interests"); // 관심사
          String grade = request.getParameter("grade"); // 학력
          String self = request.getParameter("self"); // 자기소개
          String token = request.getParameter("token"); // 토큰

          // 유효성 검사
          if (username == null || username.trim().isEmpty()) { // 아이디 입력 확인
              handleError(request, response, "아이디를 입력하세요");
              return;
          }

          if (password == null || password.isEmpty()) { // 비밀번호 입력 확인
              handleError(request, response, "비밀번호를 입력하세요");
              return;
          }

          if (!password.equals(passwordConfirm)) { // 비밀번호 확인 일치 확인
              handleError(request, response, "비밀번호를 다시 한번 확인해 주세요");
              return;
          }

          if (gender == null || gender.isEmpty()) { // 성별 입력 확인
              handleError(request, response, "성별을 선택하세요");
              return;
          }

          if (interests == null || interests.length < 2) { // 관심사 2개 이상 선택 확인
              handleError(request, response, "관심사항은 2개 이상 선택하세요");
              return;
          }

          if (grade == null || grade.isEmpty()) { // 학력 입력 확인
              handleError(request, response, "학력을 선택하세요");
              return;
          }

          if (self == null || self.trim().isEmpty()) { // 자기소개 입력 확인
              handleError(request, response, "자기소개를 입력하세요");
              return;
          }

          // 중복 체크
          UserDAO userDAO = new UserDAO();
          if (userDAO.checkUsernameExists(username)) { // 아이디 중복 체크
              handleError(request, response, "중복된 아이디가 있습니다. 다른 아이디를 사용해주세요");
              return;
          }

          // 유효성 검사를 모두 통과하면 UserDTO 객체를 생성하고 저장
          UserDTO user = new UserDTO(username, password, passwordConfirm, gender, interests, grade, self, token);

          if (userDAO.saveUser(user)) { // 사용자 저장 성공
            request.setAttribute("username", username); // 성공 시 사용자 이름 전달
              request.getRequestDispatcher("/page/SignUpOk.jsp").forward(request, response); // 회원가입 성공 페이지로 포워딩
          } else { // 사용자 저장 실패
              handleError(request, response, "회원가입에 실패했습니다. 다시 시도해주세요.");
          }
      }

      // 오류 발생 시 처리 메서드
      private void handleError(HttpServletRequest request, HttpServletResponse response, String message) throws ServletException, IOException {
          request.setAttribute("modalMessage", message); // 오류 메시지를 요청에 저장
          request.getRequestDispatcher("/page/SignUp.jsp").forward(request, response); // 오류 발생 시 회원가입 페이지로 포워딩
      }
  }
</code>
</pre>
</div>
</details>


<details>
<summary class="custom-summary2">SignUp.jsp</summary>
<div class="toggle-content">
  <!-- 네모 설명 박스 -->
  <div class="info-box">
    <p>아래 코드는 사용자 회원가입 JSP 입니다.</p>
    <p>회원가입 폼은 사용자 이름, 이메일, 비밀번호를 입력받고, 제출 시 'signup.do'로 데이터를 전송합니다.</p>
    <p>필수 입력 항목에 대해 유효성 검사 기능이 포함되어 있습니다.</p>
  </div>

<pre class="code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-javascript">
  &lt;%@page import=&quot;java.util.Arrays&quot;%&gt;
  &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;
  &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;
  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
      &lt;jsp:include page=&quot;/template/Config.jsp&quot; /&gt;
      &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;
      &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
      &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
      &lt;title&gt;SignUp.jsp&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;

      &lt;div class=&quot;container&quot;&gt;
          &lt;div class=&quot;container-fluid&quot;&gt;
              &lt;jsp:include page=&quot;/template/Header.jsp&quot; /&gt;

              &lt;!-- 회원가입 양식 시작 --&gt;
              &lt;div class=&quot;p-5 bg-success text-white mb-3&quot;&gt;
                  &lt;h1 style=&quot;font-weight: bold;&quot;&gt;회원가입&lt;/h1&gt;
              &lt;/div&gt;
              &lt;form action=&quot;signup.do&quot; method=&quot;post&quot; class=&quot;needs-validation&quot; novalidate&gt; // 회원가입 폼 시작
                  &lt;div class=&quot;form-group&quot;&gt; // 사용자 이름 입력란
                      &lt;label for=&quot;username&quot;&gt;사용자 이름&lt;/label&gt;
                      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;username&quot; name=&quot;username&quot; required&gt;
                      &lt;div class=&quot;invalid-feedback&quot;&gt;사용자 이름을 입력하세요.&lt;/div&gt;
                  &lt;/div&gt>

                  &lt;div class=&quot;form-group&quot;&gt; // 이메일 입력란
                      &lt;label for=&quot;email&quot;&gt;이메일&lt;/label&gt;
                      &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;email&quot; name=&quot;email&quot; required&gt;
                      &lt;div class=&quot;invalid-feedback&quot;&gt;유효한 이메일을 입력하세요.&lt;/div&gt;
                  &lt;/div&gt>

                  &lt;div class=&quot;form-group&quot;&gt; // 비밀번호 입력란
                      &lt;label for=&quot;password&quot;&gt;비밀번호&lt;/label&gt;
                      &lt;input type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;password&quot; name=&quot;password&quot; required&gt;
                      &lt;div class=&quot;invalid-feedback&quot;&gt;비밀번호를 입력하세요.&lt;/div&gt;
                  &lt;/div&gt;

                  &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary mt-3&quot;&gt;회원가입&lt;/button&gt; // 제출 버튼
              &lt;/form&gt;
              &lt;!-- 회원가입 양식 끝 --&gt;

          &lt;/div&gt;
      &lt;/div&gt;

  &lt;/body&gt;
  &lt;/html&gt;
</code>
</pre>
</div>
</details>


<div class="little">
<span class="little-title">(3) 게시글 CRUD</span>
</div>

<details>
<summary class="custom-summary2">WriteController.java</summary>
<div class="toggle-content">
  <div class="info-box">
    <p>아래 코드는 게시글 작성 처리하는 WriteController 입니다.</p>
    <p>사용자가 로그인 상태일 경우 제목과 내용을 받아 게시글을 등록합니다.</p>
    <p>제목과 내용이 비어있는 경우 경고 메시지를 출력하고 이전 페이지로 돌아갑니다.</p>
  </div>

<pre class="code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-java">
  @WebServlet("/WriteController") // URL 매핑
  public class WriteController extends HttpServlet { 
      private static final long serialVersionUID = 1L;

      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          HttpSession session = request.getSession(); // 세션 가져오기
          String username = (String) session.getAttribute("username"); // 사용자 이름 가져오기
          String token = (String) session.getAttribute("token"); // 토큰 가져오기

          response.setContentType("text/html; charset=UTF-8");
          PrintWriter out = response.getWriter();

          // 사용자 아이디가 없으면 로그인 페이지로 이동
          if (username == null || username.isEmpty() || token == null || token.isEmpty()) {
              response.sendRedirect("/YoonSeongBinProj2/page/Login.jsp"); // 로그인 페이지로 리다이렉트
          } else {
              // 제목과 내용을 파라미터에서 가져오기
              String title = request.getParameter("title");
              String content = request.getParameter("content");

              // 제목이나 내용이 비어있는 경우
              if (title == null || title.trim().isEmpty() || content == null || content.trim().isEmpty()) {
                  out.println("&lt;script&gt;");
                  out.println("alert('제목과 내용을 입력해주세요.');"); // 경고 메시지
                  out.println("history.back();"); // 이전 페이지로 돌아가기
                  out.println("&lt;/script&gt;");
              } else {
                  // 게시글 등록 로직
                  ServletContext application = getServletContext();
                  BbsDTO item = new BbsDTO(); // 새로운 게시글 객체 생성
                  item.setContent(content); // 내용 설정
                  item.setTitle(title); // 제목 설정
                  item.setUsername(username); // 사용자 이름 설정

                  BbsDAO dao = new BbsDAO(application); // DAO 객체 생성
                  int affected = dao.insert(item); // 게시글 삽입
                  dao.close(); // DAO 종료

                  if (affected > 0) {
                      out.println("&lt;script&gt;");
                      out.println("alert('게시글 등록이 완료되었습니다');"); // 등록 완료 메시지
                      out.println("location.href='/YoonSeongBinProj2/bbspage/BbsList.jsp';"); // 게시글 목록 페이지로 이동
                      out.println("&lt;/script&gt;");
                  } else {
                      out.println("&lt;script&gt;");
                      out.println("alert('게시글 등록에 실패하였습니다. 다시 시도해주세요');"); // 실패 메시지
                      out.println("history.back();"); // 이전 페이지로 돌아가기
                      out.println("&lt;/script&gt;");
                  }
              }
          }
      }

      protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          doPost(request, response); // doPost 메서드 호출
      }
  }
</code>
</pre>
</div>
</details>


<details>
<summary class="custom-summary2">BbsDAO.java</summary>
<div class="toggle-content">
  <div class="info-box">
    <p>아래 코드는 게시판 DAO(Data Access Object) 입니다.</p>
    <p>데이터에 접근해서 CRUD 작업을 수행하는 업무 처리 로직을 갖고 있는 객체입니다.</p>
  </div>
<pre class="code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-java">
  public class BbsDAO2 implements DAOService&lt;BbsDTO&gt; {

    // 필드
    private Connection conn;
    private ResultSet rs;
    private PreparedStatement psmt;

    // 생성자
    public BbsDAO2(ServletContext context) {
        try {
            Context initContext = new InitialContext();
            Context envContext = (Context) initContext.lookup("java:comp/env");
            DataSource dataSource = (DataSource) envContext.lookup("jdbc/ICTUSER");
            conn = dataSource.getConnection();
        } catch (NamingException | SQLException e) {
            e.printStackTrace();
        }
    }

    // 자원 반납용

    @Override
    public void close() {
        try {
            if (rs != null) rs.close();
            if (psmt != null) psmt.close();
            if (conn != null) conn.close();
        } catch (SQLException e) {}
    }

    //전체 목록 가져오기

    /*
    * 페이징 로직 추가하기
    * DAO에서 할 일
    * 1. 전체 목록 쿼리를 구간 쿼리 혹은 RANK() 함수로 변경
    * 2. 총 레코드 수 구하는 메소드 추가    
    * JSP에서는 
    * List.jsp에 페이징 관련 코드 추가
    */

    public List&lt;BbsDTO&gt; findAll(Map&lt;String, String&gt; map) {
        List&lt;BbsDTO&gt; items = new ArrayList&lt;&gt;();

        String sql = "SELECT b.id, b.title, b.content, b.hitcount, b.postdate, b.username "
                  + "FROM bbs b ";

        // 검색 조건 추가
        if (map.get("searchColumn") != null) {
            if ("username".equals(map.get("searchColumn"))) {
                sql += "WHERE b.username LIKE '%" + map.get("searchWord") + "%' ";
            } else {
                sql += "WHERE " + map.get("searchColumn") + " LIKE '%" + map.get("searchWord") + "%' ";
            }
        }

        sql += "ORDER BY b.id DESC";

        try {
            psmt = conn.prepareStatement(sql);
            rs = psmt.executeQuery();

            while (rs.next()) {
                BbsDTO item = new BbsDTO();
                item.setId(rs.getInt("id"));
                item.setTitle(rs.getString("title"));
                item.setContent(rs.getString("content"));
                item.setHitCount(rs.getInt("hitcount"));
                item.setPostDate(rs.getDate("postdate"));
                item.setUsername(rs.getString("username"));

                items.add(item);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            // 자원 해제
            close();
        }

        return items;
    }

    // 총 레코드 수 얻기용
    @Override
    public int getTotalRecordCount(Map&lt;String,String&gt; map) {
      int totalRecordCount=0;
      String sql="SELECT COUNT(*) FROM bbs b JOIN users u ON b.username=u.username ";
      // 검색시 아래 쿼리 추가
      if(map !=null && map.get("searchColumn") !=null) {
        sql+=" WHERE "+map.get("searchColumn") + " LIKE '%"+map.get("searchWord")+"%' ";
      }
      try {
        psmt = conn.prepareStatement(sql);
        rs = psmt.executeQuery();
        rs.next();
        totalRecordCount= rs.getInt(1);
      }
      catch(SQLException e) {e.printStackTrace();}
      return totalRecordCount;
    }

    // 상세보기용 - 레코드 하나 조회
    @Override
    public BbsDTO findById(String ... params) {
      BbsDTO item=null;
      
      try {
        // 목록에서 넘어온 경우에만 조회수 증가
        if(params.length &gt;=2 && params[1].toUpperCase().startsWith("BBSLIST")) {
          psmt = conn.prepareStatement("UPDATE bbs SET hitcount= hitcount+1 WHERE id=?");
          psmt.setString(1, params[0]);
          psmt.executeUpdate();
        }
          
        // 레코드 하나 조회
        psmt = conn.prepareStatement("SELECT b.*,name FROM bbs b JOIN users u ON b.username=u.username WHERE id=?");
        psmt.setString(1, params[0]);
        rs = psmt.executeQuery();
        if(rs.next()) {
          item = new BbsDTO();
          item.setContent(rs.getString(4));
          item.setHitCount(rs.getInt(5));
          item.setId(rs.getInt(1));
          item.setPostDate(rs.getDate(6));
          item.setTitle(rs.getString(3));
          item.setUsername(rs.getString(2));
        }
      }
      catch(SQLException e) {e.printStackTrace();}
      return item;
    }

    // 이전글, 다음글 조회
    public Map&lt;String, BbsDTO&gt; prevNext(String curentId){
      Map&lt;String, BbsDTO&gt; map = new HashMap&lt;&gt;();
      try {
        // 이전글 얻기
        psmt = conn.prepareStatement("SELECT id,title FROM bbs WHERE id=(SELECT MAX(id) FROM bbs WHERE id &lt; ?)");
        psmt.setString(1,curentId);
        rs = psmt.executeQuery();
        if(rs.next()) {
          map.put("PREV", new BbsDTO(rs.getLong(1), null, rs.getString(2), null, 0, null));
        }
        
        // 다음글 얻기
        psmt = conn.prepareStatement("SELECT id,title FROM bbs WHERE id=(SELECT MIN(id) FROM bbs WHERE id &gt; ?)");
        psmt.setString(1,curentId);
        rs = psmt.executeQuery();
        if(rs.next()) {
          map.put("NEXT", new BbsDTO(rs.getLong(1), null, rs.getString(2), null, 0, null));
        }
        
      }
      catch(SQLException e) {e.printStackTrace();}
      
      return map;
    }    
    
    // 입력용
    @Override
    public int insert(BbsDTO dto) {
      int affected=0;
      try {
        psmt = conn.prepareStatement("INSERT INTO BBS VALUES(SEQ_BBS.NEXTVAL,?,?,?,DEFAULT,DEFAULT)");
        psmt.setString(1, dto.getUsername());
        psmt.setString(2, dto.getTitle());
        psmt.setString(3, dto.getContent());
        affected=psmt.executeUpdate();
        
        rs = psmt.getGeneratedKeys();
        if (rs.next()) {
            dto.setId(rs.getLong(1)); // 삽입된 ID를 DTO에 설정
        }
        
      }
      catch(SQLException e) {e.printStackTrace();}
      return affected;
    }

    @Override
    public int update(BbsDTO dto) {
      int affected=0;
      try {
        psmt = conn.prepareStatement("UPDATE bbs SET title=?,content=? WHERE id=?");
        psmt.setLong(3, dto.getId());
        psmt.setString(1, dto.getTitle());
        psmt.setString(2, dto.getContent());
        affected=psmt.executeUpdate();
        
      }
      catch(SQLException e) {e.printStackTrace();}
      return affected;
    }

    // 삭제용
    @Override
    public int delete(BbsDTO dto) {
      int affected=0;
      try {
        psmt = conn.prepareStatement("DELETE FROM bbs WHERE id=?");
        psmt.setLong(1, dto.getId());
        affected = psmt.executeUpdate();
      }
      catch(SQLException e) {e.printStackTrace();}
      return affected;
    }

    // 회원 여부 판단용
    public boolean isUser(String username, String password) {
      try {
        psmt = conn.prepareStatement("SELECT COUNT(*) FROM users WHERE username=? AND password=?");
        psmt.setString(1, username);
        psmt.setString(2, password);
        rs = psmt.executeQuery();
        rs.next();
        if(rs.getInt(1)==0) return false;
      
      }
      catch(SQLException e) {
        e.printStackTrace();
        return false;
      }
      return true;
    }

  }
</code>
</pre>
</div>
</details>


<details>
<summary class="custom-summary2">BbsView.jsp</summary>
<div class="info-box">
  <p>아래 코드는 게시판 상세 조회 JSP 로, 게시글의 내용과 이전글, 다음글을 조회할 수 있습니다.</p>
  <p>사용자 인증을 확인하고, 게시글 수정, 삭제, 목록 이동 기능을 제공합니다.</p>
</div>
<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class = "language-javascript">
  &lt;%@page import="model.PagingUtil"%&gt;
  &lt;%@page import="java.util.Map"%&gt;
  &lt;%@page import="model.bbs.BbsDTO"%&gt;
  &lt;%@page import="java.util.List"%&gt;
  &lt;%@page import="model.bbs.BbsDAO"%&gt;
  &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
  &lt;!--  로그인 여부 판단:필터 사용시 아래 주석처리 --&gt;
  &lt;%-- &lt;jsp:include page="/common/IsUser.jsp" /&gt;--%&gt;

  &lt;%
    // 1.파라미터(키값) 받기
    long id = Long.parseLong(request.getParameter("id"));
    // 현재 페이지번호 받기
    String nowPageParam = request.getParameter(PagingUtil.NOWPAGE);
      int nowPage = (nowPageParam != null && !nowPageParam.isEmpty()) ? Integer.parseInt(nowPageParam) : 1;
    // 페이지 사이즈 -삭제용
    String pageSizeParam = request.getParameter(PagingUtil.PAGE_SIZE);
      int pageSize = (pageSizeParam != null && !pageSizeParam.isEmpty()) ? Integer.parseInt(pageSizeParam) : 10;
    // 검색시
    String searchColumn = request.getParameter("searchColumn");
    String searchWord = request.getParameter("searchWord");
    String searchQuery="";
    if( searchColumn !=null && searchWord.length() !=0){		
      searchQuery=String.format("searchColumn=%s&searchWord=%s&", searchColumn,searchWord);
      
    }
    
    // 2.CRUD작업용 BBSDao 생성
    BbsDAO dao = new BbsDAO(application);
    // 이전 페이지명 얻기:List.jsp에서 뷰로 올때만 조회수 증가 하기 위함
    String referer=request.getHeader("referer");
    String prevPage = referer.substring(referer.lastIndexOf("/")+1);
    // 레코드 하나 가져오기
    BbsDTO item= dao.findById(String.valueOf(id),prevPage);	
    if(item==null){
      out.println("&lt;script&gt;");
      out.println("alert('유효하지 않는 글 번호입니다');");
      out.println("history.back();");
      out.println("&lt;/script&gt;");
      dao.close();
      return;
      
    }
    // 내용 줄바꿈 처리
    item.setContent(item.getContent().replace("\r\n", "&lt;br/&gt;"));
    // 이전글, 다음글 조회
    Map&lt;String,BbsDTO&gt; map= dao.prevNext(String.valueOf(id));	
    dao.close();
  %&gt;

  &lt;%
      // 쿠키에서 토큰 가져오기
      Cookie[] cookies = request.getCookies();
      String token = null;
      if (cookies != null) {
          for (Cookie cookie : cookies) {
              if ("token".equals(cookie.getName())) {
                  token = cookie.getValue();
                  break;
              }
          }
      }

      // 세션에서 사용자 이름 가져오기
      String username = (String) session.getAttribute("username");

      // 토큰 유효성 검사
      boolean isValidToken = false;
      if (username != null && token != null) {
          model.user.UserDAO userDAO = new model.user.UserDAO();
          isValidToken = userDAO.validateToken(username, token);
          
          if (!isValidToken) {
              // 토큰이 유효하지 않다면 세션 무효화 및 쿠키 삭제
              session.invalidate();
              Cookie tokenCookie = new Cookie("token", null);
              tokenCookie.setMaxAge(0);
              response.addCookie(tokenCookie);
              username = null; // 비로그인 상태로 설정
          }
      } else {
          // 사용자 이름이나 토큰이 없으면 비로그인 상태로 처리
          username = null;
      }
  %&gt;

  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
  &lt;%--@ include file="/template/Config.jsp" --%&gt;
  &lt;jsp:include page="/template/Config.jsp" /&gt;
  &lt;title&gt;BbsView.jsp&lt;/title&gt;
  &lt;style&gt;
  th.bg-dark.text-white {
    text-align: center;
  }
  &lt;/style&gt;
  &lt;script&gt;
      function isDelete(){
          var pageSize = "&lt;%=pageSize %&gt;";
          if(pageSize === null || pageSize === "") {
              pageSize = "10"; // 기본값 설정
          }
          if(confirm("정말로 삭제하시겠습니까?")){
              location.replace("/YoonSeongBinProj2/bbspage/BbsDelete.jsp?id=&lt;%=item.getId()%&gt;&&lt;%=PagingUtil.NOWPAGE %&gt;=&lt;%=nowPage%&gt;&&lt;%=PagingUtil.PAGE_SIZE %&gt;=" + pageSize);
          }
      }
  &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class="container"&gt;
      &lt;div class="container-fluid"&gt;
        &lt;%--@ include file="/template/Header.jsp" --%&gt;
        &lt;jsp:include page="/template/Header.jsp" /&gt;

        &lt;!-- 컨텐츠 시작 --&gt;
        &lt;div class="p-5 bg-success text-white"&gt;
          &lt;h1 style="font-weight:bold"&gt;작성글 상세 보기&lt;/h1&gt;
        &lt;/div&gt;
        &lt;fieldset class="border rounded-3 p-3 text-center mt-2"&gt;
        &lt;table class="table table-hover"&gt;
          &lt;tbody&gt;
            &lt;tr &gt;
              &lt;th class="bg-dark w-25 text-white" &gt;번호&lt;/th&gt;
              &lt;td&gt;&lt;%=item.getId() %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;th class="bg-dark w-25 text-white"&gt;작성자&lt;/th&gt;
              &lt;td&gt;&lt;%=item.getUsername() %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;th class="bg-dark w-25 text-white"&gt;작성일&lt;/th&gt;
              &lt;td&gt;&lt;%=item.getPostDate() %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;th class="bg-dark w-25 text-white"&gt;조회수&lt;/th&gt;
              &lt;td&gt;&lt;%=item.getHitCount() %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;th class="bg-dark w-25 text-white"&gt;제목&lt;/th&gt;
              &lt;td&gt;&lt;%=item.getTitle() %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;th class="bg-dark text-white" colspan="2"&gt;내용&lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td colspan="2"&gt;&lt;%=item.getContent()%&gt;&lt;/td&gt;
            &lt;/tr&gt;

          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;!-- 이전글/다음글 --&gt;
        &lt;div&gt;
          &lt;table class="table" &gt;
            &lt;tbody&gt;
              
              &lt;tr&gt;
                &lt;td class="text-white bg-dark w-25 text-center" style="font-weight:bold"&gt;다음글&lt;/td&gt;
                &lt;td&gt;
                &lt;%=map.get("NEXT") == null ? "다음글이 없습니다" : String.format("&lt;a href='/YoonSeongBinProj2/bbspage/BbsView.jsp?id=%s&%s=%s&%s=%s'&gt;%s&lt;/a&gt;",
                          map.get("NEXT").getId(), PagingUtil.NOWPAGE, nowPage, PagingUtil.PAGE_SIZE, pageSize, map.get("NEXT").getTitle()) %&gt;
                &lt;/td&gt;
              &lt;/tr&gt;
              &lt;tr&gt;
                &lt;td class="text-white bg-dark w-25 text-center" style="font-weight:bold"&gt;이전글&lt;/td&gt;
                &lt;td&gt;
                &lt;%=map.get("PREV") == null ? "이전글이 없습니다" : String.format("&lt;a href='/YoonSeongBinProj2/bbspage/BbsView.jsp?id=%s&%s=%s&%s=%s'&gt;%s&lt;/a&gt;",
                          map.get("PREV").getId(), PagingUtil.NOWPAGE, nowPage, PagingUtil.PAGE_SIZE, pageSize, map.get("PREV").getTitle()) %&gt;
                &lt;/td&gt;
              &lt;/tr&gt;
            &lt;/tbody&gt;
          &lt;/table&gt;
        &lt;/div&gt;
        &lt;!-- 수정/삭제/목록 컨트롤 버튼 --&gt;
        &lt;div class="text-center"&gt;
          
          &lt;% if (isValidToken && username != null && username.equals(item.getUsername())) { %&gt;
          &lt;a href="/YoonSeongBinProj2/bbspage/BbsEdit.jsp?id=&lt;%=item.getId() %&gt;&&lt;%=PagingUtil.NOWPAGE+"="+nowPage %&gt;" class="btn btn-success"&gt;수정&lt;/a&gt; 
          &lt;a href="javascript:isDelete()"	class="btn btn-success" &gt;삭제&lt;/a&gt;				
          &lt;a href="/YoonSeongBinProj2/bbspage/BbsList.jsp?&lt;%=PagingUtil.NOWPAGE+"="+nowPage+"&"+searchQuery %&gt;" class="btn btn-success"&gt;목록&lt;/a&gt;
          &lt;% } else { %&gt;
          &lt;a href="/YoonSeongBinProj2/bbspage/BbsList.jsp?&lt;%=PagingUtil.NOWPAGE+"="+nowPage+"&"+searchQuery %&gt;" class="btn btn-success"&gt;목록&lt;/a&gt;
          &lt;%}%&gt;
        &lt;/div&gt;
        &lt;/fieldset&gt;
        &lt;!-- 컨텐츠 끝 --&gt;
        &lt;%--@ include file="/template/Footer.jsp" --%&gt;
        &lt;jsp:include page="/template/Footer.jsp" /&gt;
      &lt;/div&gt;
      &lt;!-- container-fluid --&gt;
    &lt;/div&gt;
    &lt;!--container  --&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code>
</pre>
</div>
</details>

<details>
<summary class="custom-summary2">BbsEdit.jsp</summary>
<div class="info-box">
  <p>아래 코드는 게시글 수정 기능을 제공하는 JSP 입니다.</p>
  <p>게시글 ID로 해당 데이터를 조회하고, 제목과 내용을 수정할 수 있는 폼을 제공합니다.</p>
</div>
<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class = "language-javascript">
  &lt;%@page import="model.PagingUtil"%&gt;
  &lt;%@page import="model.bbs.BbsDTO"%&gt;
  &lt;%@page import="java.util.List"%&gt;
  &lt;%@page import="model.bbs.BbsDAO"%&gt;
  &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
  &lt;!--  로그인 여부 판단:필터 사용시 아래 주석처리 --&gt;
  &lt;%-- &lt;jsp:include page="/common/IsUser.jsp" /&gt;--%&gt;
  &lt;%
      // 파라미터(id) 값이 존재하고 비어있지 않으면 long 형으로 변환, 아니면 기본값 0L 사용
      String idParam = request.getParameter("id");
      long id = (idParam != null && !idParam.isEmpty()) ? Long.parseLong(idParam) : 0L;

      // 현재 페이지번호 받기
      String nowPage = request.getParameter(PagingUtil.NOWPAGE);
      
      // CRUD 작업용 BbsDao 생성
      BbsDAO dao = new BbsDAO(application);
      
      // 레코드 하나 가져오기
      BbsDTO item = dao.findById(String.valueOf(id));

      // DAO 사용 후 리소스 정리
      dao.close();
  %&gt;

  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
  &lt;%--@ include file="/template/Config.jsp" --%&gt;
  &lt;jsp:include page="/template/Config.jsp" /&gt;
  &lt;title&gt;BbsEdit.jsp&lt;/title&gt;

  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class="container"&gt;
      &lt;div class="container-fluid"&gt;
        &lt;%--@ include file="/template/Header.jsp" --%&gt;
        &lt;jsp:include page="/template/Header.jsp" /&gt;

        &lt;!-- 컨텐츠 시작 --&gt;
        &lt;div class="p-5 bg-success text-white mb-3"&gt;
          &lt;h1 style="font-weight: bold;"&gt;회원제 게시판 수정&lt;/h1&gt;
        &lt;/div&gt;
        &lt;fieldset class="border rounded-3 p-3 text-center"&gt;
          &lt;legend class="float-none w-auto px-3" style="font-weight: bold;"&gt;수정할
            제목과 내용을 입력하세요&lt;/legend&gt;
          &lt;form action="/YoonSeongBinProj2/bbspage/BbsEditOk.jsp" method="post"&gt;

            &lt;input type="hidden" name="id" value="&lt;%=id%&gt;" /&gt; &lt;input
              type="hidden" name="&lt;%=PagingUtil.NOWPAGE%&gt;" value="&lt;%=nowPage%&gt;" /&gt;

            &lt;div class="row justify-content-center"&gt;
              &lt;div class="col-md-8"&gt;
                &lt;div class="row mb-3"&gt;

                  &lt;div class="col-md-4 mb-2 mt-5 d-flex align-items-center justify-content-md-end"&gt;
                    &lt;label for="title" class="form-label" style="font-weight: bold;"&gt;제목&lt;/label&gt;
                  &lt;/div&gt;

                  &lt;div class="col-md-6 mb-3 mt-5"&gt;
                    &lt;input type="text" class="form-control" id="title" placeholder="Enter title" name="title" value="&lt;%=item.getTitle()%&gt;"&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
                  &lt;div class="row mb-3"&gt;
                    &lt;div class="col-md-4 mb-2 mt-4 d-flex justify-content-md-end"&gt;
                      &lt;label for="content" class="form-label" style="font-weight: bold;"&gt;내용&lt;/label&gt;
                    &lt;/div&gt;

                    &lt;div class="col-md-6 mb-3 mt-3"&gt;
                      &lt;textarea placeholder="Enter content" class="form-control"
                        rows="18" id="content" name="content"&gt;&lt;%=item.getContent()%&gt;&lt;/textarea&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;

                  &lt;div class="row mb-3"&gt;
                    &lt;div class="col-md-12"&gt;
                      &lt;button type="submit" class="btn btn-dark ml-auto" style="padding: 10px 30px;"&gt;수정&lt;/button&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              
            &lt;/div&gt;
          &lt;/form&gt;
        &lt;/fieldset&gt;

        &lt;!-- 컨텐츠 끝 --&gt;
        &lt;%--@ include file="/template/Footer.jsp" --%&gt;
        &lt;jsp:include page="/template/Footer.jsp" /&gt;
      &lt;/div&gt;
      &lt;!-- container-fluid --&gt;
    &lt;/div&gt;
    &lt;!--container  --&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code>
</pre>
</div>
</details>

<details>
<summary class="custom-summary2">BbsList.jsp</summary>
<div class="info-box">
  <p>아래 코드는 게시판의 글 목록을 표시하는 JSP 입니다.</p>
  <p>검색 및 페이징 기능을 제공하며, 게시글 목록을 테이블 형식으로 출력합니다.</p>
  <p>사용자가 로그인한 경우 게시글 등록 버튼을 표시하고, 검색 기능을 통해 제목, 내용, 작성자 기준으로 게시글을 필터링할 수 있습니다.</p>
</div>

<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class = "language-javascript">
  &lt;%@page import="model.PagingUtil"%&gt;
  &lt;%@page import="java.util.HashMap"%&gt;
  &lt;%@page import="java.util.Map"%&gt;
  &lt;%@page import="model.bbs.BbsDTO"%&gt;
  &lt;%@page import="java.util.List"%&gt;
  &lt;%@page import="model.bbs.BbsDAO"%&gt;
  &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
  &lt;!--  로그인 여부 판단:필터 사용시 아래 주석처리 --&gt;
  &lt;%-- &lt;jsp:include page="/common/IsUser.jsp" /&gt;--%&gt;
  &lt;%
  // 검색과 관련된 파라미터 받기
  String searchColumn = request.getParameter("searchColumn"); // 검색 컬럼
  String searchWord = request.getParameter("searchWord"); // 검색어
  Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); // 검색 조건 담을 맵 생성
  String linkUrl = request.getContextPath() + "/YoonSeongBinProj2/bbspage/BbsList.jsp?"; // 링크 URL 초기화
  String searchQuery = ""; // 검색 쿼리 초기화
  if (searchColumn != null && searchWord != null && !searchWord.isEmpty()) {
    map.put("searchColumn", searchColumn); // 검색 컬럼 추가
    map.put("searchWord", searchWord); // 검색어 추가
    searchQuery = String.format("searchColumn=%s&searchWord=%s&", searchColumn, searchWord); // 검색 쿼리 형식 지정
    linkUrl += searchQuery; // 링크 URL에 검색 쿼리 추가
  }
  // 전체 글 목록 가져오기	
  BbsDAO dao = new BbsDAO(application);


   map.put(PagingUtil.PAGE_SIZE, this.getInitParameter("PAGE-SIZE"));  // 페이지 사이즈 설정
    map.put(PagingUtil.BLOCK_PAGE, this.getInitParameter("BLOCK-PAGE"));  // 페이지 블록 사이즈 설정
    PagingUtil.setMapForPaging(map, dao, request);  // 페이징 처리 설정
    int totalRecordCount = Integer.parseInt(map.get(PagingUtil.TOTAL_RECORD_COUNT));  // 전체 글 개수
    int pageSize = Integer.parseInt(map.get(PagingUtil.PAGE_SIZE));  // 페이지 사이즈
    int blockPage = Integer.parseInt(map.get(PagingUtil.BLOCK_PAGE));  // 블록 페이지 사이즈
    int nowPage = Integer.parseInt(map.get(PagingUtil.NOWPAGE));  // 현재 페이지 번호
    // 페이징을 위한 로직 끝
    List&lt;BbsDTO&gt; items = dao.findAll(map);  // 전체 게시글 목록 가져오기

    dao.close();  // DB 연결 종료
  %&gt;


  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
  &lt;%--@ include file="/template/Config.jsp" --%&gt;
  &lt;jsp:include page="/template/Config.jsp" /&gt;
  &lt;title&gt;BbsList.jsp&lt;/title&gt;

  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class="container"&gt;
      &lt;div class="container-fluid"&gt;
        &lt;%--@ include file="/template/Header.jsp" --%&gt;
        &lt;jsp:include page="/template/Header.jsp" /&gt;

        &lt;!-- 컨텐츠 시작 --&gt;
        &lt;div class="p-5 bg-success text-white mb-3"&gt;
          &lt;h1 style="font-weight: bold;"&gt;게시판 목록&lt;/h1&gt;
        &lt;/div&gt;
        &lt;div class="my-2 text-end"&gt;
        &lt;% String username = (String) session.getAttribute("username");
                    String token = (String) session.getAttribute("token");
                    if (username != null && token != null) { %&gt;
          &lt;a href="BbsWrite.jsp" class="btn btn-danger"&gt;게시글 등록&lt;/a&gt;
          &lt;% } else {} %&gt;
            
        &lt;/div&gt;
        &lt;table class="table table-hover text-center"&gt;
          &lt;thead class="table-dark"&gt;
            &lt;tr&gt;
              &lt;th class="col-1"&gt;번호&lt;/th&gt;
              &lt;th class="col-auto"&gt;제목&lt;/th&gt;
              &lt;th class="col-2"&gt;작성자&lt;/th&gt;
              &lt;th class="col-1"&gt;조회수&lt;/th&gt;
              &lt;th class="col-2"&gt;작성일&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;%
            // 게시글이 없으면 "등록된 글이 없습니다" 표시
            if (items.isEmpty()) {
            %&gt;
            &lt;tr&gt;
              &lt;td colspan="5"&gt;등록된 글이 없습니다.&lt;/td&gt; 
            &lt;/tr&gt;
            &lt;%
            // 게시글이 있으면 목록 출력
            } else {
            int loop = 0;
            for (BbsDTO item : items) {
            %&gt;
            &lt;tr&gt;
              &lt;td&gt;&lt;%=totalRecordCount - (((nowPage - 1) * pageSize) + loop)%&gt;&lt;/td&gt;
              &lt;td class="text-start"&gt;&lt;a
                href="BbsView.jsp?id=&lt;%=item.getId() + "&" + PagingUtil.NOWPAGE + "=" + nowPage + "&" + searchQuery + PagingUtil.PAGE_SIZE + "="
      + pageSize%&gt;"&gt;&lt;%=item.getTitle()%&gt;&lt;/a&gt;&lt;/td&gt;
              &lt;td&gt;&lt;%=item.getUsername()%&gt;&lt;/td&gt;
              &lt;td&gt;&lt;%=item.getHitCount()%&gt;&lt;/td&gt;
              &lt;td&gt;&lt;%=item.getPostDate()%&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;%
            loop++;
            }
            }
            %&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
        &lt;!-- 페이징 출력 --&gt;
        &lt;%=PagingUtil.pagingBootStrapStyle(totalRecordCount, pageSize, blockPage, nowPage, linkUrl)%&gt;
        &lt;!-- 검색 UI --&gt;

        &lt;form method="post" class="row justify-content-center"&gt; // 검색 폼

          &lt;div class="col-2"&gt;
            &lt;select class="form-control" name="searchColumn"&gt;
              &lt;option value="title"&gt;제목&lt;/option&gt;
              &lt;option value="content"&gt;내용&lt;/option&gt;
              &lt;option value="username"&gt; 작성자&lt;/option&gt;
            &lt;/select&gt;
          &lt;/div&gt;
          &lt;div class="col-5"&gt;
            &lt;input type="text" class="form-control mx-2"
              placeholder="검색어를 입력하세요" name="searchWord" /&gt;
          &lt;/div&gt;
          &lt;div class="col-auto"&gt;
            &lt;button type="submit" class="btn btn-primary"&gt;검색&lt;/button&gt;
          &lt;/div&gt;

        &lt;/form&gt;
        &lt;!-- 컨텐츠 끝 --&gt;
        &lt;jsp:include page="/template/Footer.jsp" /&gt;
      &lt;/div&gt;
      &lt;!-- container-fluid --&gt;
    &lt;/div&gt;
    &lt;!--container  --&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code>
</pre>
</div>
</details>

<details>
<summary class="custom-summary2">BbsDelete.jsp</summary>
<div class="info-box">
  <p>아래 코드는 게시글을 삭제하는 기능을 가진 JSP 입니다.</p>
  <p>사용자가 삭제하려는 게시글의 ID를 파라미터로 받아 해당 게시글을 삭제한 후, 삭제가 성공적으로 이루어지면 게시글 목록 페이지로 리디렉션합니다.</p>
  <p>삭제에 실패한 경우, 알림 창을 띄우고 이전 페이지로 돌아갑니다.</p>
  <p>삭제 후 전체 페이지 수를 재계산하고, 현재 페이지가 삭제 후 페이지 수보다 많으면 마지막 페이지로 이동하게 처리됩니다.</p>
</div>

<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class = "language-javascript">
  &lt;%@page import="java.util.HashMap"%&gt;
  &lt;%@page import="java.util.Map"%&gt;
  &lt;%@page import="model.PagingUtil"%&gt;
  &lt;%@page import="model.bbs.BbsDTO"%&gt;
  &lt;%@page import="model.bbs.BbsDAO"%&gt;
  &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
      pageEncoding="UTF-8"%&gt;
  &lt;!-- Delete.jsp --&gt;
  &lt;!--  로그인 여부 판단:필터 사용시 아래 주석처리 --&gt;
  &lt;%-- &lt;jsp:include page="/common/IsUser.jsp" /&gt;--%&gt;
  &lt;%
    
    // 1.파라미터(키값) 받기	
    long id = Long.parseLong(request.getParameter("id"));
    //현재 페이지번호 받기
    int nowPage = request.getParameter(PagingUtil.NOWPAGE) == null ? 1 : Integer.parseInt(request.getParameter(PagingUtil.NOWPAGE));
    //페이지 사이즈 -삭제용
    int pageSize = request.getParameter(PagingUtil.PAGE_SIZE) == null ? 10 : Integer.parseInt(request.getParameter(PagingUtil.PAGE_SIZE));
    
    
    // 2.CRUD작업용 BbsDao생성
    BbsDAO dao = new BbsDAO(application);	
    BbsDTO dto = new BbsDTO();
    dto.setId(id);
    int affected=dao.delete(dto);
    // 삭제 후에 총 페이지 수 구함
    int totalRecordCount = dao.getTotalRecordCount(null); // 검색시도 적용 시는 반드시 맵 전달
    
    int totalPage=(int)Math.ceil((double)totalRecordCount/pageSize);
    dao.close();
    if(totalPage &lt; nowPage) nowPage=totalPage;
    
    
    if(affected==1){
      response.sendRedirect("/YoonSeongBinProj2/bbspage/BbsList.jsp?"+PagingUtil.NOWPAGE+"="+nowPage);
    }
    else{
      out.println("&lt;script&gt;");
      out.println("alert('삭제 실패했어요');");
      out.println("history.back();");
      out.println("&lt;/script&gt;");
    }

  %&gt;
</code>
</pre>
</div>
</details>

<details>
<summary class="custom-summary2">BbsWrite.jsp</summary>
<div class="info-box">
  <p>아래 코드는 게시글을 작성하는 JSP 로, 사용자에게 제목과 내용을 입력받는 폼을 제공합니다.</p>
  <p>폼에 입력된 데이터를 'WriteController'로 POST 방식으로 전송하여 게시글을 등록하게 됩니다.</p>
  <p>폼 내에는 제목과 내용 입력 필드가 있으며, 사용자가 입력을 완료한 후 '등록' 버튼을 클릭하면 데이터가 서버로 전달되어 게시글이 생성됩니다.</p>
</div>

<div class = "toggle-content">
<pre class = "code-box">
<button class="copy-button">Copy</button>
<button class="close-button">Close</button>
<code class="language-javascript">
  &lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
  &lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
    &lt;jsp:include page="/template/Config.jsp" /&gt;
    &lt;title&gt;BbsWrite.jsp&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;div class="container"&gt;
          &lt;div class="container-fluid"&gt;
              &lt;jsp:include page="/template/Header.jsp" /&gt;
              &lt;!-- 컨텐츠 시작 --&gt;
              &lt;div class="p-5 bg-success text-white mb-3"&gt;
                  &lt;h1 style="font-weight: bold;"&gt;게시글 등록&lt;/h1&gt;
              &lt;/div&gt;
              &lt;fieldset class="border rounded-3 p-3 text-center"&gt;
                  &lt;legend class="float-none w-auto px-3" style="font-weight: bold;"&gt;등록할 제목과 내용을 입력하세요&lt;/legend&gt;  // 폼 제목
                  &lt;form action="${pageContext.request.contextPath}/WriteController" method="post"&gt;  // 폼 제출 액션
                    &lt;div class="row justify-content-center"&gt;
                        &lt;div class="col-md-8"&gt;
                            &lt;div class="row mb-3"&gt;  // 제목 입력 폼
                                &lt;div class="col-md-4 mb-2 mt-5 d-flex align-items-center justify-content-md-end"&gt;
                                    &lt;label for="title" class="form-label" style="font-weight: bold;"&gt;제목&lt;/label&gt;
                                &lt;/div&gt;
                                &lt;div class="col-md-6 mb-3 mt-5"&gt;  // 제목 입력 필드
                                    &lt;input type="text" class="form-control" id="title" placeholder="제목을 입력하세요" name="title"&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="row mb-3"&gt;  // 글 내용 입력 폼
                                &lt;div class="col-md-4 mb-2 mt-4 d-flex justify-content-md-end"&gt;
                                    &lt;label for="content" class="form-label" style="font-weight: bold;"&gt;글 내용&lt;/label&gt;
                                &lt;/div&gt;
                                &lt;div class="col-md-6 mb-3 mt-3"&gt;  // 내용 입력 필드
                                    &lt;textarea class="form-control" rows="18" id="content" name="content" placeholder="글을 입력하세요"&gt;&lt;/textarea&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="row mb-3"&gt;  // 등록 버튼
                                &lt;div class="col-md-12"&gt;
                                    &lt;button type="submit" class="btn btn-dark ml-auto" style="padding: 10px 30px;"&gt;등록&lt;/button&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/form&gt;
              &lt;/fieldset&gt;
              &lt;!-- 컨텐츠 끝 --&gt;
              &lt;jsp:include page="/template/Footer.jsp" /&gt;
          &lt;/div&gt;
          &lt;!-- container-fluid --&gt;
      &lt;/div&gt;
      &lt;!--container  --&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code>

</pre>
</div>
</details>

---

### <span class="larger-text" style="display: block; margin-bottom:-10px;">4. **실행 결과**</span>

<img src="assets/img/favicons/개인프로젝트2결과(1).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />

<img src="assets/img/favicons/개인프로젝트2결과(2).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />

<img src="assets/img/favicons/개인프로젝트2결과(3).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />

<img src="assets/img/favicons/개인프로젝트2결과(4).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />

<img src="assets/img/favicons/개인프로젝트2결과(5).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />

<img src="assets/img/favicons/개인프로젝트2결과(6).png" style="border: 2px solid rgb(73, 75, 76); border-radius: 5px;" width="800px"  height="800px" />



